<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Live Intelligence Desk</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  background:#0b0e11;
  color:#e6e6e6;
  font-family: monospace;
  padding:16px;
}

h1 { color:#00ff9c; }
h2 { color:#58a6ff; margin-top:28px; }

.item {
  border:1px solid #1f2937;
  padding:10px;
  margin-bottom:12px;
  border-radius:6px;
}

.title {
  margin-bottom:6px;
}

.url {
  color:#9cdcfe;
  font-size:12px;
  word-break: break-all;
  user-select: text;
}
</style>
</head>

<body>

<h1>LIVE INTELLIGENCE DESK</h1>

<section id="espionage">
  <h2>üïµÔ∏è Espionage & Counterintelligence</h2>
</section>

<section id="cyber">
  <h2>üíª Cyber Espionage & APTs</h2>
</section>

<section id="defence">
  <h2>ü™ñ Defence & Military Signals</h2>
</section>

<script>
async function loadFeed(feedUrl, elementId) {
  const res = await fetch(`/api/feed?url=${encodeURIComponent(feedUrl)}`);
  const text = await res.text();
  const xml = new DOMParser().parseFromString(text, "text/xml");
  const items = xml.querySelectorAll("item");
  const section = document.getElementById(elementId);

  items.forEach((item, i) => {
    if (i >= 6) return;

    const title = item.querySelector("title")?.textContent;
    const link = item.querySelector("link")?.textContent;
    if (!title || !link) return;

    const div = document.createElement("div");
    div.className = "item";
    div.innerHTML = `
      <div class="title">${title}</div>
      <div class="url">${link}</div>
    `;
    section.appendChild(div);
  });
}

loadFeed(
  "https://nitter.poast.org/search/rss?q=espionage+OR+counterintelligence",
  "espionage"
);
loadFeed(
  "https://nitter.poast.org/search/rss?q=APT+OR+cyber+espionage+nation-state",
  "cyber"
);
loadFeed(
  "https://nitter.poast.org/search/rss?q=military+exercise+OR+defence+procurement+OR+missile+test",
  "defence"
);
</script>

</body>
</html>